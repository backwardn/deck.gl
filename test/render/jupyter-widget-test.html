<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    body {padding: 0; margin: 0;}
    #app {width: 100vw; height: 100vh; overflow: hidden;}
  </style>
</head>
<body>
  <div id="app"></div>
  <script type="text/javascript" src='/node_modules/mapbox-gl/dist/mapbox-gl.js'></script>
  <script type="text/javascript" src='/node_modules/h3-js/dist/h3-js.umd.js'></script>
  <script type="text/javascript" src='/node_modules/s2-geometry/src/s2geometry.js'></script>
  <script type="text/javascript" src='/node_modules/@loaders.gl/csv/dist/dist.min.js'></script>
  <script type="text/javascript" src='/modules/main/dist.min.js'></script>
  <script type="text/javascript" src='/modules/jupyter-widget/dist/index.standalone.js'></script>
  <script type="text/javascript">

function render(jsonInput) {
  deckglwidget.createDeck({
    dependencies: {deck, mapboxgl, loaders},
    mapboxApiKey: 'NO_API_KEY', 
    container: document.getElementById('app'),
    jsonInput,
    useTooltip: true,
    onComplete: ({deckgl}) => {
      deckgl.setProps({
        onAfterRender: () => window.top.postMessage('done')
      });
    }
  });
};

window.onmessage = evt => {
  if (evt.data.json) {
    render(evt.data.json);
  }
};

  </script>
</body>
</html>
